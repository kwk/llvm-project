## In this test we define a "Symbols" entry in the YAML and expect a .symtab
## section to be generated. Notice that this is automatically added even though
## we don't have .symtab listed in the "Sections" entry.

# RUN: yaml2obj %s -o %t
# RUN: llvm-readobj --sections %t | FileCheck %s

# CHECK:      Sections [
# CHECK:        Section {
# CHECK:          Name: .symtab (25)
# CHECK-NEXT:     Type: SHT_SYMTAB (0x2)
# CHECK-NEXT:     Flags [ (0x0)
# CHECK-NEXT:     ]
# CHECK-NEXT:     Address: 0x0
# CHECK-NEXT:     Offset: 0x70
# CHECK-NEXT:     Size: 48
# CHECK-NEXT:     Link: 2
# CHECK-NEXT:     Info: 2
# CHECK-NEXT:     AddressAlignment: 8
# CHECK-NEXT:     EntrySize: 24
# CHECK-NEXT:  }
# CHECK-NEXT:]
# CHECK-EMPTY:

--- !ELF
FileHeader:
  Class:           ELFCLASS64
  Data:            ELFDATA2LSB
  Type:            ET_EXEC
  Machine:         EM_X86_64
  Entry:           0x00000000004004C0
Sections:
- Name:            .text
  Type:            SHT_PROGBITS
  Flags:           [ SHF_ALLOC, SHF_EXECINSTR ]
  Address:         0x00000000004003D0
  AddressAlign:    0x0000000000000010
  Content:         DEADBEEFBAADF00D
Symbols:
- Name:            main
  Type:            STT_FUNC
  Section:         .text
  Value:           0x00000000004003D0
  Size:            0x0000000000000008
...
